[tox]
envlist = fmt,lint,static,unit
isolated_build = true

[testenv:fmt]
description = Format code with ruff
skip_install = true
deps = ruff
commands =
    ruff format src/ tests/

[testenv:lint]
description = Lint code with ruff
skip_install = true
deps = ruff
commands =
    ruff check src/ tests/ --fix

[testenv:static]
description = Type check with ty
skip_install = true
deps = ty
commands =
    ty check src/

[testenv:unit]
description = Run unit tests
deps =
    pytest
    pytest-cov
commands =
    pytest tests/ -v --cov=src/theow --cov-report=term-missing
